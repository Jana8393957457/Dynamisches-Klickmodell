<!DOCTYPE html>
<!-- ***************************************************************
* Diese Datei gehört zum  WebEng-Kurs an der HNU
* Copyright (c) by Jana Münsch                       
* Licensed under GPL3, see http://www.gnu.org/licenses/gpl.html
******************************************************************** -->

<html>

<head>
    <meta charset="utf-8">
    <!-- Einbinden vom Stylesheet-->
    <link href="../stylesheets/style-allgemeineInfo.css" rel="Stylesheet">

    <!-- Einbinden von Java Query-->
    <script type="text/javascript" src="../client-js/jquery-3.5.1.min.js"></script>
    <style>
        .bildknopf {
            height: 40px;
            background-color: white;
            border: 0px solid green;
            margin: 4px;
        }

        label {
            text-decoration: underline;
        }
    </style>
    <title> KLEUR het KOPJE- Allgemeine Information</title> <!-- Name des Tabs im Browser-->

</head>



<body class="startseite">

    <header>

        <!--Logo einfügen-->
        <div class="item-logo"><img id="logo" src="../pics/Logo_Jana.jpg" alt="KLEUR het KOPJE" width="150"
                height="150"></div>


        <!--Navigation mit Login Button-->
        <div class="item-navi">
            <nav class="navigation">
                <ul>
                    <li><a href="../index-dyn.html">Home</a></li>
                    <li><a href="../allgemeineinfos/allgemeineInfo.html" class="sie-sind-hier">Allgemeine
                            Informationen</a></li>
                    <li><a href="../workshops/workshops.html">Workshops</a></li>
                    <li><a href="../events/events.html">Individuelle Events</a></li>
                    <li><a href="../buchungsanfragen/buchungsanfragen.html">Buchungsanfragen</a></li>
                </ul>
                <button id="login-button-admin" onclick="zeigeLoginmaskeAdmin()"> Admin-Login</button>
                <button id="login-button-MA" onclick="zeigeLoginmaskeMA()"> Mitarbeiter-Login </button>

            </nav>

        </div>

    </header>


    <main class="site-content">

        <!-- NORMALE ANSICHT -->
        <div id="standardMaske" class="view">
            <div>
                <p>Willkommen! Auf dieser Seite kannst du durch unsere Informationen stöbern und erfährst alles was du
                    wissen musst.<br>
                    Bei Fragen stehen wir dir natürlich auch sehr gerne zur Verfügung. Viel Spaß!</p>
                <div>
                    <p>Hier kannst Du dir
                        <button class="startseiteButton" onclick="infosAnzeigen('infoListe')">Informationen
                            anzeigen</button> lassen</p>
                </div>
                <!-- Bild vom Buchladen einfügen-->
                <div> <img class="fotoWerkstatt" src="../pics/keramik_foto_01.jpeg"
                        alt="Keramikmalwerkstatt Juliane Klein" width="700" height="450"></div>


            </div>
        </div>


        <!--LISTENANSICHT -->

        <div id="liste" class="view">
            <!-- Liste aller Informationen -->
            <button id="anlegenButton" onclick="zeigeEingabemaske()" style="display: none">Neue Info
                anlegen</button>
            <!-- Liste aller Events -->
            <ul id="infoListe">
            </ul>
        </div>


        <!-- LOGINMASKE Admin-->
        <div id="loginMaske" style="display:none">
            <h2>Bitte logge dich ein Admin!</h2>
            <form action="javascript:infosAnzeigenadm('infoListe')" method="post">
                <div class="formular">
                    <label>Benutzername</label>
                    <input type="text" placeholder="Benutzernamen eingeben" />
                </div>
                <div class="formular">
                    <label>Passwort</label>
                    <input type="password" placeholder="Passwort eingeben" />
                </div>
                <input type="submit" value="Login" />
            </form>

        </div>

        <!--<div style="width:50%;height:1000px;background-color:white"></div>-->



        <!-- LOGINMASKE MA -->
        <div id="loginMaskeMA" style="display:none">
            <h2>Bitte logge dich ein Mitarbeiter!</h2>
            <form action="javascript:infosAnzeigenma('infoListe')" method="post">

                <div class="formular">
                    <label>Benutzername</label>
                    <input type="text" placeholder="Benutzernamen eingeben" />
                </div>
                <div class="formular">
                    <label>Passwort</label>
                    <input type="password" placeholder="Passwort eingeben" />
                </div>
                <input type="submit" value="Login">


            </form>
        </div>



        <!--CRUD Operatoren-->

        <!--ändern-->
        <button class="crud-button" style="display: none" onclick="infosAnzeigenAendern('infoListe')"> ändern </button>
        <!--anlegen-->
        <button class="crud-button" style="display: none" onclick="zeigeEingabemaske()"> Anlegen </button>
        <!--löschen-->
        <button class="crud-button" style="display: none" onclick="infosAnzeigenLoeschen('infoListe')">
            Löschen
        </button>
        <button class="crud-button adminButton" style="display: none" onclick="zeigeEingabemaskeanlegen()"> Anlegen
        </button>


        <!--Eingabemaske Informationen ändern noch ohne Validierung!-->
        <form id="eingabe" style="display:none" class="view" action="">
            <!--Formular zur Validitätsfunktion. Validierung bis jetzt aber noch nicht funktionsfähig-->
            <!--<form action="javascript:zeigeEingabemaske()">-->
                    <h2>Information anlegen/ändern</h2>
                <div class="formular">
                    <label>Informationsnummer:<br></label>
                    <input id="input-Informationsnummer" type="text" placeholder="Informationsnummer eingeben" /><br>
                </div>

                <div class="formular">
                    <label>Bildmaterial:<br></label>
                    <input type="text" id="input-Bildmaterial" placeholder="ja/nein?"><br>
                </div>

                <div class="formular">
                    <label>Name des Autors:<br></label>
                    <input type="text" id="input-Name-Autor" placeholder="Name des Autors"><br>
                </div>

                <div class="formular">
                    <label>Datum:<br></label>
                    <input type="date" id="input-Datum"><br>
                </div>

                <div class="formular">
                    <label for="zeichenAnzahl">Zeichen Anzahl:<br></label>
                    <input type="text" id="input-Zeichen-Anzahl" placeholder="Bitte in Zahlen angeben"><br>
                </div>

                <div class="formular">
                    <label>Buchstaben Anzahl:<br></label>
                    <input type="text" id="input-Buchstaben-Anzahl" placeholder="Bitte in Zahlen angeben"><br>
                </div>

            <input type="submit" value="Speichern"/>

            </form>

        <footer id="footer">

            <p></p>
            <a href="#">Impressum</a>
            <a href="#">Kontakt</a>

        </footer>
    </main>





    <!--Skripte ################################################################-->


    <script type="text/javascript">
        function zeigeLoginmaskeAdmin() {
            console.log('zeigeLoginmaskeAdmin');
            //nur Loginansicht sichtbar machen
            $(".view").hide();
            $("#loginMaske").show();
            $("#standardMaske").hide();
            $("#loginMaskeMA").hide();
        }
    </script>

    <script type="text/javascript">
        function zeigeLoginmaskeMA() {
            console.log('zeigeLoginmaskeMA');
            //nur Loginansicht sichtbar machen
            $(".view").hide();
            $("#loginMaskeMA").show();
            $("#standardMaske").hide();
            $("#loginMaske").hide();
        }
    </script>


    <!--MA Bereich Button-->
    <script type="text/javascript">
        function zeigeMaBereich() {
            //Unsichtbarmachen der Loginmaske
            $("#loginMaskeMA").hide();
            //Unsichtbarmachen der Standardmaske            
            $("#standardMaske").hide();
            //Unsichtbarmachen der Informationen für den Kunden


            //Sichtbarmachen der erweiterten Funktionalitäten


            //Login-Knopf zu Logout-Knopf machen
            $("#login-button-MA").html("Ausloggen")
                .attr("onclick", "ausloggen()");


        }
    </script>


    <!--Ausloggen-->
    <script type="text/javascript">
        function ausloggen() {
            //Logout-Knopf zu Login-Knopf machen
            $("#login-button-admin").html("Admin-Login")
                .attr("onclick", "zeigeLoginmaskeAdmin()");

            $("#login-button-MA").html("Mitarbeiter-Login")
                .attr("onclick", "zeigeLoginmaskeMA()");
            // Nur Standardmaske sichtbar machen
            $("#standardMaske").show();

        }
    </script>


    <script type="text/javascript">
        //DATENSTRUKTUR der Informationsliste
        function Info(informationsNr, bildmaterial, nameAutor, datum, zeichenAnzahl, buchstabenAnzahl) {
            console.log("zeigeInformationMitarbeiter" + informationsNr + bildmaterial + nameAutor + datum +
                zeichenAnzahl + buchstabenAnzahl)
            this.infoNummer = informationsNr;
            this.infoBildmaterial = bildmaterial;
            this.infoAutor = nameAutor;
            this.infoDatum = datum;
            this.infoZeichenAnzahl = zeichenAnzahl;
            this.infoBuchstaben = buchstabenAnzahl;
        }
    </script>

    <script type="text/javascript">
        //Array Liste mit Informationen zur Datenhaltung
        var infoArray = new Array();
        infoArray[0] = new Info('123', 'ja', 'S.Schmid', '2020-09-05', 124, 110);
        infoArray[1] = new Info('5678', 'nein', 'M.Reinhardt', '2020-09-05', 508, 499);
        infoArray[2] = new Info('1368', 'ja', 'P.Hahne', '2020-09-05', 700, 880);
        infoArray[3] = new Info('6804', 'nein', 'J.Clarkson', '2020-09-05', 800, 789);
    </script>

    <script>
        function infos(index) {
            console.log("Funktion infos mit " + index);
            /* In dieser Funktion wird jeweils der Arrayeintrag der index-ten Stelle als Ast erzeugt (der später in die Baumstruktur des DOM als Ast gehängt werden kann)
             */
            var infos = "";
            //Erzeuge Titel-Ast
            var informationsNr = "";
            informationsNr = "<label>Informations Nummer:</label>";
            informationsNr = informationsNr + "<div>" + infoArray[index].infoNummer + "</div>";

            //Erzeuge Bildmaterial
            var bildmaterial = "";
            bildmaterial = "<label>Bildmaterial:</label>";
            bildmaterial = bildmaterial + "<div>" + infoArray[index].infoBildmaterial + "</div>";

            //Erzeuge den Namen des Autors
            var nameAutor = "";
            nameAutor = "<label>Name des Autors:</label>";
            nameAutor = nameAutor + "<div>" + infoArray[index].infoAutor + "</div>";

            //Erzeuge das Datum des Eintrags
            var datum = "";
            datum = "<label>Datum:</label>";
            datum = datum + "<div>" + infoArray[index].infoDatum + "</div>";

            //Erzeuge die Anzahl der Zeichen im Text
            var zeichenAnzahl = "";
            zeichenAnzahll = "<label>Anzahl der Zeichen:</label>";
            zeichenAnzahl = zeichenAnzahl + "<div>" + infoArray[index].infoZeichenAnzahl + "</div>";

            //Erzeuge die Anzahl der Buchstaben im Text
            var buchstabenAnzahl = "";
            buchstabenAnzahl = "<label>Anzahl der Buchstaben:</label>";
            buchstabenAnzahl = buchstabenAnzahl + "<div>" + infoArray[index].infoBuchstaben + "</div>";

            infos = "<div>" + informationsNr + "</div>" +
                "<div>" + bildmaterial + "</div>" +
                "<div>" + nameAutor + "</div>" +
                "<div>" + datum + "</div>" +
                "<div>" + zeichenAnzahl + "</div>" +
                "<div>" + buchstabenAnzahl + "</div>";

            return infos;

        }
    </script>


    <!-- Anzeigen##################################-->
    <!-- Kunde#####################################-->
    <script type="text/javascript">
        //Anzeigen für Kunde
        function infosAnzeigen(ort) {
            console.log('infosAnzeigen: ' + ort);
            //nur Listenansicht sichtbar machen
            $(".view").hide();
            $("#liste").show();


            //Listenansicht initialisieren
            $('#' + ort).empty();

            //Array-Schleife: für jeden Eintrag Erzeugung eines Event-Eintrags in die Listenansicht
            for (var i = 0; i < infoArray.length; i++) {
                infoEinhaengen(i, ort);

            }
        }
    </script>

    <script type="text/javascript">
        function infoEinhaengen(index, ort) {
            console.log("Funktion infoEinhaengen mit " + index + ", " + ort);
            /*Erzeugung eines HTML-Strings für eine Zeile
              durch Erzeugen eines HTML-Fragments für ein Workshop 
            */
            $("#" + ort).append(
                '<li id="' + index + '">' +
                infos(index) +
                '</li>'
            );
        }
    </script>

    <!-- Admin#####################################-->
    <script type="text/javascript">
        function infosAnzeigenadm(ort) {
            console.log('InfosAnzeigenADM: ' + ort);
            //Anzeigen für Admin
            $(".view").hide();
            $("#liste").show();
            $("#loginMaske").hide();


            //Login-Knopf zu Logout-Knopf machen
            $("#login-button-admin").html("Ausloggen")
                .attr("onclick", "ausloggen()");

            //CRUD-Funktionen für Admins anzeigen  
            $(".adminButton").css("display", "inline-block");


            //Listenansicht initialisieren
            $('#' + ort).empty();

            //Array-Schleife: für jeden Eintrag Erzeugung eines Buch-Eintrags in die Listenansicht
            for (var i = 0; i < infoArray.length; i++) {
                infoEinhaengenadm(i, ort);
            }

        }
    </script>

    <script type="text/javascript">
        function infoEinhaengenadm(index, ort) {
            console.log("Funktion infoEinhaengenadm mit " + index + ", " + ort);
            /*Erzeugung eines HTML-Strings für eine Zeile
              durch Erzeugen eines HTML-Fragments für ein Workshop und dazu jeweils ein Ändern- und ein Löschknopf
			  und Anhängen des Strings als neues Element im ort-Tag
            */
            $("#" + ort).append(
                '<li id="' + index + '">' +
                infos(index)
                //  + '</li>'
                // Ändern Icon
                +
                button(index, "zeigeEingabemaskeADM", "../pics/bearbeiten_icon.png")
                //Löschen Icon
                +
                button(index, "zeigeSicherheitsabfrageADM", "../pics/Muelleimer.icon.jpg")
                //   + '</li>'

                +
                '</li>'
            );

        }
    </script>
<script>        
function zeigeEingabemaskeanlegen(index) {
    console.log('zeigeEingabemaske anlegen ' + index);

    //nur Eingabemaske sichtbar machen
    $(".view").hide();
    $("#eingabe").show();
    $(".adminButton").hide();

    //Eingabemaske initialisieren
    $("#eingabe input").val("");
    $("#eingabe input[type='submit']").val("Speichern");
    $("#eingabe").attr("action", "javascript:infoSpeichernADM('')");
}</script>

    <script>
        function zeigeEingabemaskeADM(index) {
            console.log('EingabemaskeADM ' + index);

            //nur Eingabemaske sichtbar machen
            $(".view").hide();
            $("#eingabe").show();
            $(".adminButton").hide();

            //Eingabemaske initialisieren
            $("#eingabe input").val("");
            $("#eingabe input[type='submit']").val("Speichern");

        //Daten in die Eingabemaske eintragen
        $("#input-Informationsnummer").val(infoArray[index].infoNummer);
        $("#input-Bildmaterial").val(infoArray[index].infoBildmaterial);
        $("#input-Name-Autor").val(infoArray[index].infoAutor);
        $("#input-Datum").val(infoArray[index].infoDatum);
        $("#input-Zeichen-Anzahl").val(infoArray[index].infoZeichenAnzahl);
        $("#input-Buchstaben-Anzahl").val(infoArray[index].infoBuchstaben);
        $("#eingabe").attr("action", "javascript:infoSpeichernADM('" + index + "')");
        }
    </script>


<script type="text/javascript">
    function infoSpeichernADM(index) {
        console.log("Funktion infoSpeichernADM mit " + index);
        //Lesen der Benutzereingaben
        var infoNummer = $("#input-Informationsnummer").val();
        var infoBildmaterial = $("#input-Bildmaterial").val();
        var infoAutor = $("#input-Name-Autor").val();
        var infoDatum = $("#input-Datum").val();
        var infoZeichenAnzahl = $("#input-Zeichen-Anzahl").val();
        var infoBuchstaben = $("#input-Buchstaben-Anzahl").val();

        //Ändern-Seite unsichtbar machen
        $("#aendernSeite").hide();

        console.log("\t ändern mit " + index);
        //Ändern der Eventdaten im Array
        infoArray[infoArray.length] = new Info(infoNummer, infoBildmaterial, infoAutor, infoDatum,
            infoZeichenAnzahl, infoBuchstaben);

        infosAnzeigenadm("infoListe");
    }
</script>

<script>        
function zeigeSicherheitsabfrageADM(index) {
    console.log("Funktion Sicherheitsabfrage mit " + index);
    if (confirm("Wollen Sie die Info wirklich löschen?")) {
        infoLoeschen(index);
        infosAnzeigenadm('infoListe');

    }
}</script>

    <!-- Mitarbeiter#####################################-->
    <script type="text/javascript">
        function infosAnzeigenma(ort) {
            console.log('InfosAnzeigenMA: ' + ort);
            //Anzeigen für Mitarbeiter
            $(".view").hide();
            $("#liste").show();
            $("#loginMaskeMA").hide();

            //Login-Knopf zu Logout-Knopf machen
            $("#login-button-MA").html("Ausloggen")
                .attr("onclick", "ausloggen()");

            //Listenansicht initialisieren
            $('#' + ort).empty();

            //Array-Schleife: für jeden Eintrag Erzeugung eines Buch-Eintrags in die Listenansicht
            for (var i = 0; i < infoArray.length; i++) {
                infoEinhaengenma(i, ort);
            }

        }
    </script>

    <script type="text/javascript">
        function infoEinhaengenma(index, ort) {
            console.log("Funktion workshopEinhaengenAendern mit " + index + ", " + ort);
            /*Erzeugung eines HTML-Strings für eine Zeile
              durch Erzeugen eines HTML-Fragments für ein Workshop und dazu jeweils ein Ändern-button */
            $("#" + ort).append(
                '<li id="' + index + '">' +
                infos(index)
                //  + '</li>'
                // Ändern Icon
                +
                button(index, "zeigeEingabemaskeMA", "../pics/bearbeiten_icon.png") +
                '</li>'
            );

        }
    </script>

    <script type="text/javascript">
        //Ändern-Funktion für Mitarbeiter, damit nach dem abspeichern die richtige Listenansicht gezeigt wird
        function zeigeEingabemaskeMA(index) {
            console.log('zeigeEingabemaskeMA ' + index);

            //nur Eingabemaske sichtbar machen
            $(".view").hide();
            $("#eingabe").show();

            //Eingabemaske initialisieren
            $("#eingabe input").val("");
            $("#eingabe input[type='submit']").val("Speichern");

        //Daten in die Eingabemaske eintragen
        $("#input-Informationsnummer").val(infoArray[index].infoNummer);
        $("#input-Bildmaterial").val(infoArray[index].infoBildmaterial);
        $("#input-Name-Autor").val(infoArray[index].infoAutor);
        $("#input-Datum").val(infoArray[index].infoDatum);
        $("#input-Zeichen-Anzahl").val(infoArray[index].infoZeichenAnzahl);
        $("#input-Buchstaben-Anzahl").val(infoArray[index].infoBuchstaben);
        $("#eingabe").attr("action", "javascript:datenSpeichernMA('" + index + "')");
    }</script>

    <script type="text/javascript">
        function button(id, func, bildpfad) {
            console.log("Funktion button mit " +
                id + ", " +
                func + ", " +
                bildpfad
            );
            var button = "";
            //Das mit \ "escaped" Anführungszeichen ist die dritte verschachtelte Ebene für Anführungszeichen
            button = "<img onclick='" +
                func + "(\"" + id + "\")'" +
                "class='bildknopf'" +
                "src='" + bildpfad + "'/>";


            return button;

        }
    </script>

<script>       
    function datenSpeichernMA(index) {
    console.log("Funktion datenSpeichernMA mit " + index);
    //Lesen der Benutzereingaben
    var informationsNr = $("#input-Informationsnummer").val();
        var bildmaterial = $("#input-Bildmaterial").val();
        var nameAutor = $("#input-Name-Autor").val();
        var datum = $("#input-Datum").val();
        var zeichenAnzahl = $("#input-Zeichen-Anzahl").val();
        var buchstabenAnzahl = $("#input-Buchstaben-Anzahl").val();

    //Die Länge des Arrays ist gerade immer genau 
    // um eins größer als der max. Index des Arrays
    infoArray[infoArray.length] = new Info(informationsNr, bildmaterial, nameAutor, datum, zeichenAnzahl,
    buchstabenAnzahl);

    infosAnzeigenma("infoListe");
}</script>
    


<!--CRUD-Funktionen#################################-->
    <script type="text/javascript">
        //Löschen
        function infoLoeschen(index) {
            console.log("Funktion infoLoeschen mit " + index);
            infoArray.splice(index, 1);
        }
    </script>



<script>        
function workshopLoeschen(index) {
    console.log("Funktion workshopLoeschen mit " + index);
    workshopArray.splice(index, 1);
}</script>



    <!-- HILFSFUNKTIONEN-->

    <script type="text/javascript">
        function info(index) {}

    </script>


</body>

</html>